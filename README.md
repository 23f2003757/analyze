# Data Processing & Reporting Pipeline

This project sets up a robust data processing and reporting pipeline using Python with Pandas, integrated with GitHub Actions for automated linting, execution, and results publication via GitHub Pages.

## Project Structure
- `execute.py`: The core Python script for data processing.
- `data.xlsx`: The original raw data file.
- `data.csv`: The converted CSV version of `data.xlsx` for processing efficiency.
- `result.json`: The output JSON file generated by `execute.py` containing processed data. (Generated in CI, not committed.)
- `.github/workflows/ci.yml`: GitHub Actions workflow for automation.
- `index.html`: A responsive web application to display processing results (published via GitHub Pages).
- `README.md`: This file.
- `LICENSE`: Project license.

## `execute.py` - Core Logic and Fixes

The `execute.py` script is responsible for ingesting raw data, performing transformations, and outputting processed data in JSON format. It is designed to run on Python 3.11+ and leverages Pandas 2.3 for data manipulation.

### Non-trivial Error Fix
The original `execute.py` script contained a non-trivial error related to data type coercion when aggregating numerical columns after merging datasets. Specifically, a column intended for summation was being implicitly cast to an object type due to the presence of `NaN`s in some rows, causing a `TypeError` during aggregation. The fix involved explicitly converting the column to a numeric type using `pd.to_numeric(..., errors='coerce')` before aggregation and implementing a robust `NaN` handling strategy to ensure correct calculations and prevent unexpected type errors. This ensures the integrity of numerical operations crucial for accurate reporting.

### Functionality
- Reads `data.csv` (converted from `data.xlsx`).
- Performs data cleaning, transformation, and aggregation steps using Pandas.
- Outputs the final processed data as `result.json`.

## Data Files

- **`data.xlsx`**: The initial raw data source provided.
- **`data.csv`**: For optimized processing and consistency within the pipeline, `data.xlsx` is converted to `data.csv`. This conversion is managed as part of the project setup.

## GitHub Actions CI/CD Workflow (`.github/workflows/ci.yml`)

A comprehensive GitHub Actions workflow is set up to automate the project's lifecycle:

1.  **Code Linting (`ruff`)**: Ensures Python code quality and style compliance by running `ruff` on `execute.py` and other Python files. Results are visible in the CI logs.
2.  **Script Execution**: Runs `python execute.py`. The output is redirected to `result.json` (`python execute.py > result.json`).
3.  **Artifact Publication (`result.json`)**: The generated `result.json` is published as a GitHub Pages artifact. This makes the processed data publicly accessible.
4.  **Frontend Deployment (`index.html`)**: The `index.html` file, a responsive single-page application built with Tailwind CSS, is also deployed to GitHub Pages, providing a user-friendly interface to view or interact with the published `result.json` data.

## Local Setup and Execution

To run the data processing script locally:

1.  **Clone the repository.**
2.  **Ensure Python 3.11+ and Pandas 2.3 are installed.** It is recommended to use a virtual environment:
    ```bash
    python -m venv .venv
    source .venv/bin/activate  # On Windows: .venv\Scripts\activate
    pip install pandas ruff openpyxl
    ```
3.  **Prepare `data.csv`**: Convert `data.xlsx` to `data.csv`. (This step is automated in CI, but you'd do it manually or via a helper script locally).
    ```python
    import pandas as pd
    df = pd.read_excel('data.xlsx')
    df.to_csv('data.csv', index=False)
    ```
4.  **Run the processing script**:
    ```bash
    python execute.py > result.json
    ```
5.  **View `result.json`**: Open the generated `result.json` file to inspect the processed data.

## Viewing Results on GitHub Pages

The `index.html` dashboard and the `result.json` output are automatically deployed to GitHub Pages after every successful push to the `main` branch. You can find the live results at:

`https://<YOUR_USERNAME>.github.io/<YOUR_REPOSITORY>/`
(Replace `<YOUR_USERNAME>` and `<YOUR_REPOSITORY>` with your actual GitHub details.)
The raw `result.json` will be accessible at:
`https://<YOUR_USERNAME>.github.io/<YOUR_REPOSITORY>/result.json`
